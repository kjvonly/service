// Code generated by fertilize; DO NOT EDIT.
package {{ .PackageName}}

import (
  	"encoding/json"
	"fmt"
	"github.com/gitamped/seed/server"
	"github.com/gitamped/seed/validate"
)

{{- range $s := .Services}} 
{{ range $m := $s.Methods}} 
// {{$m.Name}}Handler validates input data prior to calling {{$m.Name}}
func (h {{$s.Name}}r) {{$m.Name}}Handler(r server.GenericRequest, b []byte) (any, error) {
	var hr {{(index $m.InputObjects 0).TypeName}}
	if err := json.Unmarshal(b, &hr); err != nil {
		return nil, fmt.Errorf("Unmarshalling data: %w", err)
	}

	if err := validate.Check(hr); err != nil {
		return nil, fmt.Errorf("validating data: %w", err)
	}

	return h.{{$m.Name}}(hr, r), nil
}
{{- end}}
{{- end}}
